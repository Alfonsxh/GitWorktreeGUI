<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.gitworktree.manager</id>
    <name>Git Worktree Manager</name>
    <vendor email="support@gitworktree.com" url="https://github.com/yourusername/git-worktree-manager">Git Worktree Manager</vendor>

    <description><![CDATA[
    <h2>Git Worktree Manager for JetBrains IDEs</h2>
    
    <p>A powerful Git Worktree management tool optimized for AI-assisted programming workflows.</p>
    
    <h3>Features:</h3>
    <ul>
        <li>🌳 <b>Visual Worktree Management</b>: View and manage all your Git worktrees in a tree view</li>
        <li>🚀 <b>Quick Switch</b>: Switch between worktrees with a single click or keyboard shortcut</li>
        <li>🔒 <b>Lock/Unlock</b>: Protect worktrees from accidental modifications</li>
        <li>📁 <b>Easy Navigation</b>: Open worktrees in terminal or file explorer</li>
        <li>🎯 <b>AI-Optimized</b>: Perfect for managing multiple parallel development tasks with AI tools</li>
        <li>🔄 <b>Auto-Refresh</b>: Automatically updates when worktrees change</li>
        <li>📊 <b>Status Bar Integration</b>: See current worktree at a glance</li>
    </ul>
    
    <h3>Usage:</h3>
    <p>Open the Git Worktree tool window from View → Tool Windows → Git Worktree or use the keyboard shortcut Alt+Shift+W</p>
    ]]></description>

    <change-notes><![CDATA[
    <h3>Version 1.0.0</h3>
    <ul>
        <li>Initial release</li>
        <li>Basic worktree management functionality</li>
        <li>Tree view with worktree status</li>
        <li>Quick switch between worktrees</li>
        <li>Lock/unlock worktrees</li>
        <li>Status bar integration</li>
    </ul>
    ]]></change-notes>

    <!-- Product and plugin compatibility requirements -->
    <depends>com.intellij.modules.platform</depends>
    <depends>Git4Idea</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Tool Window -->
        <toolWindow id="Git Worktree" 
                    secondary="false" 
                    icon="/icons/worktree.svg" 
                    anchor="left"
                    factoryClass="com.gitworktree.manager.ui.WorktreeToolWindowFactory"/>
        
        <!-- Project Service -->
        <projectService serviceImplementation="com.gitworktree.manager.services.WorktreeService"/>
        
        <!-- Settings -->
        <projectConfigurable 
            parentId="project.propVCSSupport.Mappings"
            instance="com.gitworktree.manager.ui.WorktreeSettingsConfigurable"
            id="gitworktree.settings"
            displayName="Git Worktree Manager"/>
        
        <!-- Status Bar Widget -->
        <statusBarWidgetFactory 
            id="GitWorktreeWidget"
            implementation="com.gitworktree.manager.ui.WorktreeStatusBarWidgetFactory"/>
        
        <!-- Notifications -->
        <notificationGroup id="Git Worktree Manager" 
                          displayType="BALLOON"/>
    </extensions>

    <actions>
        <!-- Main Menu Actions -->
        <group id="GitWorktree.MainMenu" text="Git Worktree" popup="true">
            <add-to-group group-id="VcsGroups" anchor="after" relative-to-action="Git.Menu"/>
        </group>
        
        <!-- Tool Window Actions -->
        <action id="GitWorktree.Add" 
                class="com.gitworktree.manager.actions.AddWorktreeAction" 
                text="Add Worktree"
                description="Create a new Git worktree"
                icon="AllIcons.General.Add">
            <add-to-group group-id="GitWorktree.MainMenu"/>
        </action>
        
        <action id="GitWorktree.Remove" 
                class="com.gitworktree.manager.actions.RemoveWorktreeAction" 
                text="Remove Worktree"
                description="Remove selected worktree"
                icon="AllIcons.General.Remove">
            <add-to-group group-id="GitWorktree.MainMenu"/>
        </action>
        
        <action id="GitWorktree.Switch" 
                class="com.gitworktree.manager.actions.SwitchWorktreeAction" 
                text="Switch Worktree"
                description="Switch to selected worktree"
                icon="AllIcons.Actions.CheckOut">
            <add-to-group group-id="GitWorktree.MainMenu"/>
            <keyboard-shortcut keymap="$default" first-keystroke="alt shift W"/>
        </action>
        
        <action id="GitWorktree.Lock" 
                class="com.gitworktree.manager.actions.LockWorktreeAction" 
                text="Lock/Unlock Worktree"
                description="Lock or unlock selected worktree"
                icon="AllIcons.Nodes.Padlock">
            <add-to-group group-id="GitWorktree.MainMenu"/>
        </action>
        
        <action id="GitWorktree.Refresh" 
                class="com.gitworktree.manager.actions.RefreshWorktreeAction" 
                text="Refresh"
                description="Refresh worktree list"
                icon="AllIcons.Actions.Refresh">
            <add-to-group group-id="GitWorktree.MainMenu"/>
        </action>
        
        <action id="GitWorktree.OpenInTerminal" 
                class="com.gitworktree.manager.actions.OpenInTerminalAction" 
                text="Open in Terminal"
                description="Open worktree in terminal"
                icon="AllIcons.Debugger.Console">
            <add-to-group group-id="GitWorktree.MainMenu"/>
        </action>
    </actions>
</idea-plugin>